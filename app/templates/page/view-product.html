{% extends 'base.html' %}
{% block content %}

<nav aria-label="breadcrumb">
	<ol class="breadcrumb">
		<li class="breadcrumb-item"><a href="{{ url_for('page.shop') }}">Shop</a></li>
		<li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
	</ol>
</nav>

{% include 'theme-chooser.html' %}
<br />
<br />
<div class="row">
	<div class="col-md-6 col-12">
		<div class="relative">
			{% if product.links %}	
				<a href="{{ product.links[0].url }}" target="_blank">
			{% endif %}
					<img src="{{ product.image }}" class="img-fluid" />
					{% if product.on_sale %}
						<img src="{{ url_for('static', filename='images/sale-ribbon.png') }}" class="sale-banner sale-banner-lg" />
					{% endif %}
			</a>
		</div>
	</div>
	<div class="col">
		<h1>{{ product.name }}</h1>
		{% if product.linked_page %}
			<small class="text-muted">
				(Product for: 
				<i>
					<a href="{{ product.linked_page.path }}">
						{{ product.linked_page.title }}
					</a>
				</i>)
			</small>
		{% endif %}

		<p class="mb-5">{{ product.description }}</p>
		<center>
		Starting at
		{% if product.on_sale and product.sale_price %}
			<h2 class="mb-5">
				<span class="sale-strike">{{ product.price }}</span>
				<b class="text-danger">{{ product.sale_price }}</b>
			</h2>
		{% else %}
			<h2 class="mb-5">{{ product.price }}</h2>
		{% endif %}
		{% if product.links %}	
			<a href="{{ product.links[0].url }}" class="btn btn-primary btn-lg mb-3" target="_blank">
				<i class="{{ product.links[0].icon }}"></i>
				{{ product.links[0].text }}
			</a>
		</center>
			{% if product.links|length > 1 %}
				<hr class="mb-4" />
				<div class="row">
				{% for format in product.grouped_links() %}
					<div class="col-md-6 col-12 mb-3">
						<h3>
							{% if format[0].format %}
								{{ format[0].format }}
							{% else %}
								More Links
							{% endif %}
						</h3>
						{% for link in format %}
							&nbsp;&nbsp;&nbsp;&nbsp;
							<i class="{{ link.icon }}"></i>
							<a href="{{ link.url }}" target="_blank">{{ link.text_simple() }}</a><br />
						{% endfor %}
					</div>
				{% endfor %}
				</div>
			{% endif %}
		{% else %}
			<button type="button" class="btn btn-secondary btn-lg disabled" disabled>
				<i class="fas fa-seedling"></i> Coming Soon!
			</button>
			</center>
		{% endif %}
	</div>
</div>

<br />

<hr class="mb-4" />

<h3 class="mb-4">Related Products</h3>

<div class="row">
	{% for r_product in related %}
		<div class="col-md-3 col">
			{{ r_product.card()|safe }}
		</div>
	{% endfor %}
</div>

<h3 class="mt-4 text-center">Find more in the <a href="{{ url_for('page.shop') }}"><i class="fas fa-shopping-cart"></i> Shop</a></h3>

{% endblock %}
